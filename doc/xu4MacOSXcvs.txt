=====================================
How to Compile xu4 from CVS in MacOSX
=====================================

-------------------------------
Things you only have to do once
-------------------------------

1. Download and install the latest MacOSX developer tools from:
   http://developer.apple.com/

2. Add /usr/local/bin to your path. To do this in bash (e.g. in Mac OS X
   Panther) add the folloing line to your ".profile":
   	export PATH=$PATH:/usr/local/bin

3. Download the following libraries in source-code form and build them.
   Make sure they all install to /usr/local

   SDL: http://www.libsdl.org
   OGG Vorbis Libraries: http://www.vorbis.com
     Note: Get the 1.0 developer kit for MacOSX. Copy the includes to
     /usr/local/include and the libs to /usr/local/lib
     These libraries need to be in place before you build SDL_mixer.
   SDL_mixer: http://www.libsdl.org/projects/SDL_mixer/
     Note: Build with "./configure --disable-music-mp3" unless you want to 
     get the smpeg library and build that too (unnecessary for XU4)
   libpng: http://www.libpng.org/pub/png/libpng.html

   The following two libraries are only necessary if you are running on a
   version of Mac OS X earlier than Panther, or if you want to build a
   statically linked version of XU4 that will run on a pre-Panther system.

   libiconv: http://www.gnu.org/software/libiconv/
     Note: Build with "./configure --enable-static --disable-shared"
   libxml2: http://www.xmlsoft.org/

4. Start the Terminal app (usually in /Applications/Utilities)

5. Change to the directory where you want XU4 cvs
   e.g. cd ~/

6. Check out the current xu4 cvs source code
   cvs -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/xu4 login
   Just press enter when it asks for password
   cvs -z3 -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/xu4 co u4

7. Change to the src directory of the XU4 source code
   i.e. cd u4/src

8. Edit Makefile.macosx. Select the type of build desired (either static
   or dynamically linked, for Panther or Jaguar) and uncomment the appropriate
   lines. Make sure the lines for the other sections are commented out.
     Note: The default settings are fine for either Panther or Jaguar, as
     long as libiconv and libxml2 were downloaded and installed in /usr/local

8. Compile xu4 and utilities
   make -f Makefile.macosx

9. To build an application bundle version of xu4 type
   make -f Makefile.macosx install

10. Download the Ultima IV data files and update (if desired) and copy
    them into the appropriate location:
    cp (wherever_you_put_ultima4.zip) xu4.app/Contents/Resources
    cp (wherever_you_put_u4upgrad.zip) xu4.app/Contents/Resources

------------------------------------------------------------
Things you have to do every time the xu4 source code changes
------------------------------------------------------------

1. Start the Terminal app

2. Change to the xu4 directory
   e.g. cd u4

3. Checkout the latest changes from CVS
   cvs update -d

4. Change to the source directory
   cd src

5. Compile xu4
   make -f Makefile.macosx clean
   make -f Makefile.macosx
   make -f Makefile.macosx install

6. If you have moved or deleted the old application bundle, it may be
   necessary to copy the Ultima IV data files and update into the bundle
   again:
   cp (wherever_you_put_ultima4.zip) xu4.app/Contents/Resources
   cp (wherever_you_put_u4upgrad.zip) xu4.app/Contents/Resources

